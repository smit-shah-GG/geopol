# Milestone v1.1: Tech Debt Remediation

**Status:** SHIPPED 2026-01-30
**Phases:** 6-8
**Total Plans:** 5

## Overview

Stabilize v1.0 foundation by resolving all known technical debt before adding new features. Focus areas: bug fix (NetworkX API), infrastructure (bootstrap pipeline), and scalability (graph partitioning).

## Phases

### Phase 6: NetworkX Fix

**Goal**: Graph entity queries return valid results without API errors
**Depends on**: Phase 5 (v1.0 complete)
**Requirements**: BUG-01
**Plans**: 1 plan

Plans:
- [x] 06-01: Fix NetworkX API call and update tests

**Details:**
Replaced broken `nx.shortest_path(cutoff=...)` with correct `nx.single_source_shortest_path(cutoff=...)`. Updated exception handling from `nx.NetworkXNoPath` to `nx.NodeNotFound`. Added regression tests for connected, disconnected, and cutoff-exceeded cases.

### Phase 7: Bootstrap Pipeline

**Goal**: A single command takes the system from zero data to fully operational (ingested events, built graph, indexed RAG store)
**Depends on**: Phase 6
**Requirements**: INFRA-01, INFRA-02
**Plans**: 2 plans

Plans:
- [x] 07-01: Bootstrap orchestration module with stage definitions
- [x] 07-02: Checkpoint/resume and dual idempotency

**Details:**
5-stage pipeline: GDELTCollectStage, ProcessEventsStage, BuildGraphStage, PersistGraphStage, IndexRAGStage. Atomic checkpoint writes using tempfile + os.replace pattern. Dual idempotency: checkpoint status AND output validation for skip decisions. ConsoleReporter with [STAGE] prefix format. 28 comprehensive tests.

### Phase 8: Graph Partitioning

**Goal**: Knowledge graph scales beyond 1M events through partitioning while preserving query correctness across partition boundaries
**Depends on**: Phase 7
**Requirements**: SCALE-01, SCALE-02
**Plans**: 2 plans

Plans:
- [x] 08-01: Partition index (SQLite) and partition manager (temporal-first partitioning, LRU cache)
- [x] 08-02: Boundary resolver, scatter-gather query router, PartitionedTemporalGraph interface

**Details:**
Temporal-first partitioning (edges bucketed by time windows, default 30 days). SQLite EntityPartitionIndex for entity-to-partition routing. LRU cache with gc.collect() on eviction. BoundaryResolver tracks home/replica partitions. Merged graph approach for k-hop correctness across time partitions. 100% query correctness vs single-graph queries validated.

---

## Milestone Summary

**Key Decisions:**

| Decision | Rationale | Outcome |
|----------|-----------|---------|
| Atomic state writes (tempfile + os.replace) | Prevent checkpoint corruption on interrupt | Good |
| Dual idempotency | Checkpoint + output validation for robust resume | Good |
| Temporal-first partitioning | Efficient time-range queries, natural data locality | Good |
| Merged graph for k-hop | Only way to ensure correctness across time partitions | Good |
| SQLite for partition index | Persistence survives restart, fast entity lookup | Good |
| LRU with gc.collect() | Mitigate Python memory fragmentation | Good |

**Issues Resolved:**

- UAT-005: NetworkX API misuse (shortest_path vs single_source_shortest_path)
- Missing production bootstrap for zero-to-operational system startup
- Knowledge graph memory exhaustion beyond ~500K events

**Issues Deferred:**

None.

**Technical Debt Incurred:**

- datetime.utcnow() deprecated in Python 3.12+ (present in bootstrap code)
- bootstrap.py dry-run fails if pandas not installed (test env issue)

---

*For current project status, see .planning/ROADMAP.md*
