---
phase: 01-data-foundation
plan: 01
type: execute
---

<objective>
Set up Python project structure and establish GDELT API access with rate limiting.

Purpose: Create the foundational infrastructure for reliable GDELT data ingestion.
Output: Working Python project with gdeltdoc client fetching recent events.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-phase.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-data-foundation/01-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Initialize Python project with dependencies</name>
  <files>requirements.txt, .gitignore, src/__init__.py, src/config.py, README.md</files>
  <action>Create Python project structure with requirements.txt containing: gdeltdoc==1.12.0, gdeltPyR==0.1.14, pandas>=2.0.0, python-dotenv, schedule, pyarrow, dask, requests. Add .gitignore for Python (include .env, *.db, data/, __pycache__). Create src/ directory with __init__.py. Create config.py with configuration management using environment variables for API settings and data paths. Create minimal README.md documenting project purpose and setup.</action>
  <verify>pip install -r requirements.txt succeeds without errors, python -c "import gdeltdoc; print(gdeltdoc.__version__)" outputs 1.12.0</verify>
  <done>All dependencies installed, project structure created, imports work</done>
</task>

<task type="auto">
  <name>Task 2: Create GDELT Doc API client with rate limiting</name>
  <files>src/gdelt_client.py, src/rate_limiter.py</files>
  <action>Create rate_limiter.py implementing exponential backoff with configurable base delay (1s default) and max retries (5). Track request timestamps to respect rate limits. Create gdelt_client.py wrapping gdeltdoc.GdeltDoc with: fetch_recent_events() method accepting date range and filters, automatic retry on rate limit errors (HTTP 429), logging of requests and responses, configurable timeout (30s default). Use gdeltdoc Filters for QuadClass and theme filtering. Include error handling for network issues and malformed responses.</action>
  <verify>python -c "from src.gdelt_client import GDELTClient; client = GDELTClient(); print('Client initialized')" works without errors</verify>
  <done>GDELT client created with rate limiting, error handling, and retry logic</done>
</task>

<task type="auto">
  <name>Task 3: Implement basic event fetching with filtering</name>
  <files>src/fetch_events.py, test_fetch.py</files>
  <action>Create fetch_events.py with fetch_conflict_diplomatic_events(date_str) function that uses gdeltdoc Filters with theme="DIPLOMATIC_EXCHANGE OR ARMED_CONFLICT", fetches articles for the specified date, filters by tone (negative < -5 for conflicts, -2 to 2 for diplomatic), returns pandas DataFrame with deduplicated results. Create test_fetch.py script that fetches events for today's date, prints count by event type, saves sample to data/sample_events.csv. Handle edge cases: empty results, API errors, date format issues.</action>
  <verify>python test_fetch.py runs without errors and outputs event counts, data/sample_events.csv exists with event data</verify>
  <done>Event fetching works, conflict/diplomatic filtering applied, sample data retrieved</done>
</task>

</tasks>

<verification>
Before declaring phase complete:
- [ ] `pip list | grep gdelt` shows both gdeltdoc and gdeltPyR installed
- [ ] `python test_fetch.py` successfully fetches and filters events
- [ ] Rate limiting prevents 429 errors during repeated requests
- [ ] Sample events saved to data/sample_events.csv
</verification>

<success_criteria>
- All tasks completed
- All verification checks pass
- No unhandled errors
- GDELT API client successfully fetches filtered events
- Rate limiting protects against API throttling
</success_criteria>

<output>
After completion, create `.planning/phases/01-data-foundation/01-01-SUMMARY.md`:

# Phase 1 Plan 1: Project Setup and GDELT Client Summary

**Established Python project with working GDELT Doc API client**

## Accomplishments

- Created project structure with scientific Python dependencies
- Built rate-limited GDELT client with exponential backoff
- Implemented event fetching with conflict/diplomatic filtering

## Files Created/Modified

- `requirements.txt` - Project dependencies including gdeltdoc 1.12.0
- `src/gdelt_client.py` - Rate-limited GDELT API wrapper
- `src/rate_limiter.py` - Exponential backoff implementation
- `src/fetch_events.py` - Event fetching with QuadClass filtering
- `test_fetch.py` - Test script demonstrating functionality

## Decisions Made

- Using gdeltdoc for recent events (3-month window) rather than full CSV downloads
- Implementing client-side rate limiting to prevent 429 errors
- Tone-based filtering for conflict/diplomatic classification

## Issues Encountered

None expected for basic setup

## Next Step

Ready for 01-02-PLAN.md (Event Storage Schema)
</output>